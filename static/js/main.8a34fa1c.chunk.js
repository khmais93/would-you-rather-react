(this["webpackJsonpwould-you-rather-react"]=this["webpackJsonpwould-you-rather-react"]||[]).push([[0],{179:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(42),o=n.n(r),c=n(65),s=n.n(c),i=n(121),u=n(32),j=n(21),b=n(8),d={bulbasaur:{id:"bulbasaur",name:"Bulbasaur",avatarURL:"https://img.pokemondb.net/artwork/bulbasaur.jpg",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},charmander:{id:"charmander",name:"Charmander",avatarURL:"https://img.pokemondb.net/artwork/charmander.jpg",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},squirtle:{id:"squirtle",name:"Squirtle",avatarURL:"https://img.pokemondb.net/artwork/squirtle.jpg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]},meowth:{id:"meowth",name:"Meowth",avatarURL:"https://img.pokemondb.net/artwork/meowth.jpg",answers:{},questions:[]},psyduck:{id:"psyduck",name:"Psyduck",avatarURL:"https://img.pokemondb.net/artwork/psyduck.jpg",answers:{},questions:[]},pikachu:{id:"pikachu",name:"Pikachu",avatarURL:"https://img.pokemondb.net/artwork/pikachu.jpg",answers:{},questions:[]},caterpie:{id:"caterpie",name:"Caterpie",avatarURL:"https://img.pokemondb.net/artwork/caterpie.jpg",answers:{},questions:[]},rattata:{id:"rattata",name:"Rattata",avatarURL:"https://img.pokemondb.net/artwork/rattata.jpg",answers:{},questions:[]}},l={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"bulbasaur",timestamp:1467166872634,optionOne:{votes:["bulbasaur"],text:"be president of China"},optionTwo:{votes:[],text:"be president of USA"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"squirtle",timestamp:1468479767190,optionOne:{votes:[],text:"be Ronaldo"},optionTwo:{votes:["squirtle","bulbasaur"],text:"Messi"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"bulbasaur",timestamp:1488579767190,optionOne:{votes:[],text:"be able to talk with the animals"},optionTwo:{votes:["bulbasaur"],text:"speak all foreign languages"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"bulbasaur",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["bulbasaur"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"charmander",timestamp:1489579767190,optionOne:{votes:["charmander"],text:"find $50 yourself"},optionTwo:{votes:["squirtle"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"squirtle",timestamp:1493579767190,optionOne:{votes:["squirtle"],text:"write JavaScript"},optionTwo:{votes:["charmander"],text:"write Java"}}};function O(e){return new Promise((function(t,n){var a=e.author,r=function(e){var t=e.optionOneText,n=e.optionTwoText,a=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}(e);setTimeout((function(){l=Object(b.a)(Object(b.a)({},l),{},Object(j.a)({},r.id,r)),d=Object(b.a)(Object(b.a)({},d),{},Object(j.a)({},a,Object(b.a)(Object(b.a)({},d[a]),{},{questions:d[a].questions.concat([r.id])}))),t(r)}),1e3)}))}function h(e,t,n){return function(e){var t=e.authUser,n=e.qid,a=e.answer;return new Promise((function(e,r){setTimeout((function(){d=Object(b.a)(Object(b.a)({},d),{},Object(j.a)({},t,Object(b.a)(Object(b.a)({},d[t]),{},{answers:Object(b.a)(Object(b.a)({},d[t].answers),{},Object(j.a)({},n,a))}))),l=Object(b.a)(Object(b.a)({},l),{},Object(j.a)({},n,Object(b.a)(Object(b.a)({},l[n]),{},Object(j.a)({},a,Object(b.a)(Object(b.a)({},l[n][a]),{},{votes:l[n][a].votes.concat([t])}))))),e()}),500)}))}({authUser:e,qid:t,answer:n})}var p="RECEIVE_QUESTIONS",x="UPDATE_OPTIONS",m="ADD_QUESTION";function f(e){return{type:p,questions:e}}function v(e,t,n){return{type:x,authUser:e,qid:t,answer:n}}function w(e){return{type:m,formattedQuestion:e}}var g="RECEIVE_USERS",y="UPDATE_ANSWERS",q="UPDATE_USERS_QUESTIONS";function k(e){return{type:g,users:e}}function T(e,t,n){return{type:y,authUser:e,qid:t,answer:n}}function U(e){return{type:q,formattedQuestion:e}}var S=n(12),R=n(36),E=n(13),z=n(149),P="SET_AUTH_USER",C=function(e){return{type:P,id:e}},I=n(131),A=n(201),L=n(198),Q=n(193),D=n(148),N=n(196),_=n(195),W=n(2),F=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(!1),s=Object(u.a)(c,2),i=s[0],j=s[1],b=Object(S.b)(),d=Object(S.c)((function(e){return e.users})),l=""===r;return Object(W.jsxs)(I.a,{children:[Object(W.jsxs)(A.a,{as:"h4",block:!0,attached:"top",textAlign:"center",children:[Object(W.jsx)(A.a.Content,{children:"Welcome to the Would You Rather App!"}),Object(W.jsx)(A.a.Subheader,{children:"Please sign in to continue"})]}),!0===i&&Object(W.jsx)(L.a,{active:!0,inverted:!0,children:Object(W.jsx)(Q.a,{inverted:!0,content:"Loading"})}),Object(W.jsx)("br",{}),Object(W.jsx)(D.a,{src:"https://www.bravo.de/assets/field/image/pikachu_bts.jpg",size:"medium",centered:!0}),Object(W.jsx)("br",{}),Object(W.jsxs)(N.a,{onSubmit:function(e){e.preventDefault(),new Promise((function(e,t){j(!0),setTimeout((function(){return e()}),500)})).then((function(){return b(C(r))}))},children:[Object(W.jsx)(_.a,{placeholder:"Select Friend",fluid:!0,selection:!0,options:Object.values(d).map((function(e){return{key:e.id,text:e.name,value:e.id,image:{avatar:!0,src:e.avatarURL}}})),onChange:function(e,t){e.preventDefault(),o(t.value)},value:r}),Object(W.jsx)("br",{}),Object(W.jsx)(N.a.Button,{content:"Login",positive:!0,disabled:l,fluid:!0})]})]})},M=n(145),J=n(200),B=function(e){var t=Object(S.b)(),n=Object(S.c)((function(e){return e.users})),a=Object(S.c)((function(e){return e.authUser})),r=Object(E.g)();return Object(W.jsxs)(M.a,{children:[Object(W.jsx)(M.a.Item,{header:!0,children:"Would You Rather"}),Object(W.jsx)(M.a.Item,{as:R.c,to:"/",name:"home",exact:!0}),Object(W.jsx)(M.a.Item,{as:R.c,to:"/add",name:"newPoll"}),Object(W.jsx)(M.a.Item,{as:R.c,to:"/top",name:"leaderPoll"}),Object(W.jsxs)(M.a.Menu,{position:"right",children:[Object(W.jsx)(M.a.Item,{children:Object(W.jsxs)("span",{children:[Object(W.jsx)(D.a,{src:n[a].avatarURL,avatar:!0,spaced:"right"}),n[a].name]})}),Object(W.jsx)(M.a.Item,{children:Object(W.jsx)(J.a,{content:"Logout",labelPosition:"right",basic:!0,compact:!0,icon:"log out",size:"mini",onClick:function(e){e.preventDefault(),t(C(null)),r.push("/")}})})]})]})},H=n(204),G=n(197),V=function(e){var t=Object(S.c)((function(e){return e.users}));return Object(W.jsx)(G.a,{celled:!0,children:e.data.map((function(n){return Object(W.jsxs)(G.a.Item,{children:[Object(W.jsx)(G.a.Content,{floated:"right",children:e.answered?Object(W.jsx)(J.a,{as:R.b,to:"/questions/".concat(n.id),color:"blue",children:"Results"}):Object(W.jsx)(J.a,{as:R.b,to:"/questions/".concat(n.id),positive:!0,children:"Answer"})}),Object(W.jsx)(D.a,{avatar:!0,src:t[n.author].avatarURL}),Object(W.jsxs)(G.a.Content,{children:[Object(W.jsxs)(G.a.Header,{children:["Question asked by ",n.author.toUpperCase()]}),Object(W.jsxs)(G.a.Description,{children:["Would you rather ",Object(W.jsx)("br",{}),Object(W.jsx)("a",{children:Object(W.jsx)("b",{children:n.optionOne.text})})," ",Object(W.jsx)("br",{}),"or ..."]})]})]},n.id)}))})},Y=function(e){var t,n=Object(S.c)((function(e){var t=e.authUser,n=e.questions,a=e.users,r=Object.keys(a[t].answers),o=Object.values(n).filter((function(e){return!r.includes(e.id)}));return{answeredQuestions:Object.values(n).filter((function(e){return r.includes(e.id)})),unasweredQuestions:o}}));return Object(W.jsx)(I.a,{children:Object(W.jsx)("div",{children:Object(W.jsx)(H.a,{panes:(t=n,[{menuItem:"Unanswered",render:function(){return Object(W.jsx)(H.a.Pane,{children:Object(W.jsx)(V,{answered:!1,data:t.unasweredQuestions})})}},{menuItem:"Answered",render:function(){return Object(W.jsx)(H.a.Pane,{children:Object(W.jsx)(V,{answered:!0,data:t.answeredQuestions})})}}])})})})},$=n(203),K=n(199),X=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(S.b)(),j=function(e,t){var n=t.value;return o(n)},b=e.match.params.id,d=Object(S.c)((function(e){return e.questions[b]})),l=Object(S.c)((function(e){return e.authUser})),O=Object(S.c)((function(e){return e.users}));return Object.keys(O[l].answers).includes(b)?Object(W.jsxs)(I.a,{children:["Results of ",Object(W.jsx)("b",{children:"Would you rather :"}),Object(W.jsx)(K.a,{value:d.optionOne.votes.length,total:d.optionOne.votes.length+d.optionTwo.votes.length,progress:"ratio",success:!0,children:d.optionOne.text}),Object(W.jsx)(K.a,{value:d.optionTwo.votes.length,total:d.optionOne.votes.length+d.optionTwo.votes.length,progress:"ratio",warning:!0,children:d.optionTwo.text})]}):Object(W.jsx)(I.a,{children:Object(W.jsxs)(N.a,{children:[Object(W.jsxs)(N.a.Field,{children:[Object(W.jsx)("b",{style:{textTransform:"capitalize"},children:d.author})," Asks"," ",Object(W.jsx)("br",{})," ",Object(W.jsx)("br",{}),Object(W.jsx)("b",{children:"Would you rather :"})]}),Object(W.jsx)(N.a.Field,{children:Object(W.jsx)($.a,{radio:!0,label:d.optionOne.text,name:"checkboxRadioGroup",value:"optionOne",checked:"optionOne"===r,onChange:j})}),Object(W.jsx)(N.a.Field,{children:Object(W.jsx)($.a,{radio:!0,label:d.optionTwo.text,name:"checkboxRadioGroup",value:"optionTwo",checked:"optionTwo"===r,onChange:j})}),Object(W.jsx)(J.a,{type:"submit",onClick:function(e){e.preventDefault(),c(function(e,t,n){return function(){var a=Object(i.a)(s.a.mark((function a(r){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h(e,t,n);case 2:r(T(e,t,n)),r(v(e,t,n));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(l,b,r))},children:"Submit"})]})})},Z=function(e){var t=Object(S.c)((function(e){return e.users})),n=Object.keys(t),a=n.map((function(e){return t[e].questions.length+Object.keys(t[e].answers).length})),r={};n.forEach((function(e,t){return r[e]=a[t]}));var o=[];for(var c in r)o.push([c,r[c]]);return o.sort((function(e,t){return t[1]-e[1]})),o=o.slice(0,3),Object(W.jsxs)(I.a,{children:[Object(W.jsx)(A.a,{as:"h3",textAlign:"center",block:!0,attached:"top",children:"Our winners are:"}),Object(W.jsx)("br",{}),Object(W.jsx)(G.a,{horizontal:!0,children:o.map((function(e,n){return Object(W.jsxs)(G.a.Item,{children:[Object(W.jsx)(D.a,{avatar:!0,src:t[e[0]].avatarURL}),Object(W.jsxs)(G.a.Content,{children:[Object(W.jsx)(G.a.Header,{children:t[e[0]].name}),"Score is ",e[1]," ",Object(W.jsx)("br",{})," Rank: ",n+1]})]})}))})]})},ee=function(e){var t=Object(S.b)(),n=Object(S.c)((function(e){return e.authUser})),r=Object(a.useState)(""),o=Object(u.a)(r,2),c=o[0],j=o[1],b=Object(a.useState)(""),d=Object(u.a)(b,2),l=d[0],h=d[1],p=Object(a.useState)(!1),x=Object(u.a)(p,2),m=x[0],f=x[1],v=Object(a.useState)(!1),g=Object(u.a)(v,2),y=g[0],q=g[1],k=""===c||""===l;return!0===m?Object(W.jsx)(E.a,{to:"/"}):Object(W.jsxs)(I.a,{children:[Object(W.jsx)(A.a,{as:"h3",textAlign:"left",block:!0,attached:"top",children:"Create a New Poll"}),!0===y&&Object(W.jsx)(L.a,{active:!0,inverted:!0,children:Object(W.jsx)(Q.a,{inverted:!0,content:"Loading"})}),Object(W.jsx)("br",{}),Object(W.jsxs)(N.a,{onSubmit:function(e){e.preventDefault(),new Promise((function(e,a){q(!0),t(function(e,t,n){return function(){var a=Object(i.a)(s.a.mark((function a(r){var o;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O({optionOneText:e,optionTwoText:t,author:n});case 2:o=a.sent,console.log(o.optionOne.text),r(w(o)),r(U(o));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(c,l,n)),setTimeout((function(){return e("success")}),1e3)})).then((function(){h(""),j(""),f(!0)}))},children:[Object(W.jsxs)(N.a.Field,{children:[Object(W.jsx)("label",{children:"Would you rather"}),Object(W.jsx)("input",{placeholder:"Enter option one",value:c,onChange:function(e){j(e.target.value)}})]}),Object(W.jsxs)(N.a.Field,{children:[Object(W.jsx)("label",{children:"Or"}),Object(W.jsx)("input",{placeholder:"Enter option two",value:l,onChange:function(e){h(e.target.value)}})]}),Object(W.jsx)(J.a,{disabled:k,type:"submit",fluid:!0,children:"Submit"})]})]})},te=n(142),ne=n(143),ae=n(147),re=n(146),oe=n(194),ce=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){return Object(te.a)(this,n),t.apply(this,arguments)}return Object(ne.a)(n,[{key:"render",value:function(){return Object(W.jsxs)(oe.a,{textAlign:"center",children:[Object(W.jsx)(A.a,{as:"h3",children:"No Match 404 Error"}),Object(W.jsx)("p",{children:"Nothing to see here. Please use the menu to try again."})]})}}]),n}(a.Component);var se=function(e){var t=e.children;return Object(W.jsx)(z.a,{padded:"vertically",columns:1,centered:!0,children:Object(W.jsx)(z.a.Row,{children:Object(W.jsx)(z.a.Column,{style:{maxWidth:550},children:t})})})},ie=function(){var e=Object(S.b)(),t=Object(S.c)((function(e){return e.authUser}));return Object(a.useEffect)((function(){e(function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(b.a)({},d))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(b.a)({},l))}),1e3)}))]).then((function(e){var t=Object(u.a)(e,2);return{users:t[0],questions:t[1]}}));case 2:n=e.sent,a=n.users,r=n.questions,t(f(r)),t(k(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(W.jsxs)(R.a,{children:[Object(W.jsx)("div",{className:"App",children:null===t?Object(W.jsx)(E.b,{render:function(){return Object(W.jsx)(se,{children:Object(W.jsx)(F,{})})}}):Object(W.jsxs)(a.Fragment,{children:[Object(W.jsx)(B,{}),Object(W.jsx)(se,{children:Object(W.jsxs)(E.d,{children:[Object(W.jsx)(E.b,{exact:!0,path:"/",component:Y}),Object(W.jsx)(E.b,{path:"/questions/:id",component:X}),Object(W.jsx)(E.b,{path:"/add",component:ee}),Object(W.jsx)(E.b,{path:"/top",component:Z}),Object(W.jsx)(E.b,{component:ce})]})})]})}),Object(W.jsxs)("footer",{className:"footer",children:["Project maintained by"," ",Object(W.jsx)("a",{href:"mailto: khmais.mrad@gmail/com",children:"Khmais Mrad"})]})]})},ue=(n(179),n(75));var je=n(112);var be=Object(ue.b)({authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return t.id;default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(b.a)(Object(b.a)({},e),t.questions);case x:return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},t.qid,Object(b.a)(Object(b.a)({},e[t.qid]),{},Object(j.a)({},t.answer,Object(b.a)(Object(b.a)({},e[t.qid][t.answer]),{},{votes:[].concat(Object(je.a)(e[t.qid][t.answer].votes),[t.authUser])})))));case m:return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},t.formattedQuestion.id,Object(b.a)({},t.formattedQuestion)));default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(b.a)(Object(b.a)({},e),t.users);case y:return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},t.authUser,Object(b.a)(Object(b.a)({},e[t.authUser]),{},{answers:Object(b.a)(Object(b.a)({},e[t.authUser].answers),{},Object(j.a)({},t.qid,t.answer))})));case q:return Object(b.a)(Object(b.a)({},e),{},Object(j.a)({},t.formattedQuestion.author,Object(b.a)(Object(b.a)({},e[t.formattedQuestion.author]),{},{questions:[].concat(Object(je.a)(e[t.formattedQuestion.author].questions),[t.formattedQuestion.id])})));default:return e}}}),de=n(144),le=function(e){return function(t){return function(n){console.group(n.type),console.log("The action:",n);var a=t(n);return console.log("The new state: ",e.getState()),console.groupEnd(),a}}},Oe=Object(ue.a)(de.a,le),he=(n(180),Object(ue.c)(be,Oe));o.a.render(Object(W.jsx)(S.a,{store:he,children:Object(W.jsx)(ie,{})}),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.8a34fa1c.chunk.js.map